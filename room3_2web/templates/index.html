<!DOCTYPE html>
<html>
    <head>
        <title>Login</title>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
   
   <script>
        document.addEventListener('DOMContentLoaded',()=>{

            var socket = io.connect(location.protocol + '//' + document.domain + ':' + location.port);

            socket.on('connect',()=>{
                console.log('connected');
               document.querySelector('#submit').onclick =() =>{
                const user= document.querySelector('#user').value;
                const room = document.querySelector('#room').value;
                socket.emit('join',{'user':user,'room':room});
                console.log('emitted');
                return false;
               };

            });

        });
        
    </script>
        
    </head>
    <body>
    <form id="new-task" action="{{ url_for('chat') }}" method="post">
        <input type="text" autocomplete="off" autofocus id="user" placeholder="username"> 
        <input type="text" autocomplete="off" autofocus id="room" placeholder="room">
        <input type="submit" id="submit" value="join">     
    </form> 
    </body>
</html>