<!DOCTYPE html>
<head>
    <title>
        store counter
    </title>
    <script>
        //one problem exist that data is lost on closing ,local storage is reset
        let itemsArray = localStorage.getItem('items')?JSON.parse(localStorage.getItem('items')):[];
        
        if(itemsArray.length==0)
        {
            itemsArray[0]=0;
        }

        localStorage.setItem('items',JSON.stringify(itemsArray));
        let data = JSON.parse(localStorage.getItem('items'));

    
        
        

            

        document.addEventListener('DOMContentLoaded',()=>{
            //fetch last item add to itemsArray
            
        data.forEach(item =>{
            //create li
            const li = document.createElement('li');
            //add value to li
            li.innerHTML = item;
            //add to DOM
            document.querySelector('#task').append(li);


        });

//problem of not adding other element to items local storage

        document.querySelector('button').onclick = () => {
            //fetch last item add to itemsArray
        data = JSON.parse(localStorage.getItem('items'))
        let counter  = data[data.length-1];
        
        counter++; 
            //var or const???

        const li = document.createElement('li');
            //add value to li
            li.innerHTML = counter;
            //add to DOM
            document.querySelector('#task').append(li);

           
        //add item to local storage
        itemsArray.push(counter);
        localStorage.setItem('items',JSON.stringify(itemsArray));
        
    
        };
    });

    </script>
</head>
<body>
    <ul id="task">

    </ul>
    <button>click</button>
</body>